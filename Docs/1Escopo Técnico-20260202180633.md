# Escopo Técnico

## 1\. Princípios do MVP
Antes da técnica, os princípios:
*   Um único setor: Atendimento Inicial
*   Uma IA exclusiva para esse setor
*   Tudo que influencia a IA deve ser editável no dashboard
*   Sem preocupação com alta performance agora
* * *
## 2\. Stack Tecnológica
### Backend
*   NestJS
*   PostgreSQL
*   Agendamentos simples
    *   Cron (@nestjs/schedule)
*   Integrações
    *   ChatGuru API
    *   Slack API
    *   Sendgrid SMTP
### Frontend
*   Next.js
*   Dashboard administrativo
*   Autenticação via JWT
*   Controle de acesso por nível:
    *   admin
    *   lider
    *   atendente
* * *
## 3\. Conceito de Setor (Simples e Expansível)
Mesmo no MVP, tudo já nasce com sector\_id.
Exemplo
*   Atendimento Inicial → IA própria
*   Pós-venda → outra IA (futuro)
No MVP:
*   Só existe 1 setor
*   Mas o código não assume isso
## 4\. IA no MVP (Modelo Simples e Controlável)
### 4.1 Como a IA funciona no MVP
A IA:
*   Não “aprende sozinha”
*   Não se auto-modifica
*   Segue prompts configuráveis
*   Avalia atendimentos com base nesses prompts
Ou seja:
quem controla o comportamento da IA é o dashboard, não o código.
### 4.2 Prompts Gerenciáveis via Dashboard
#### Tipos de prompts (MVP)
*   Prompt base do setor
*   Prompt de padrão de atendimento
*   Prompt de empatia
*   Prompt de uso de mídia
*   Prompt de erros comuns
*   Prompt de feedback diário
*   Prompt de feedback quinzenal
Cada prompt:
*   Tem versão
*   Pode ser editado
*   Pode ser ativado/desativado
*   Pode ser ajustado sem deploy
## 5\. Backend — Módulos Essenciais
### 5.1 Auth & Perfis
*   Login
*   JWT
*   Role:
    *   Admin
    *   Líder
    *   Atendente
### 5.2 Integração ChatGuru
*   Buscar atendimentos por atendente
*   Buscar mensagens
*   Normalizar dados
*   Salvar no banco
Nada em tempo real no MVP (pull via cron)
### 5.3 Módulo de Setores
*   Cadastro de setor
*   Associação:
    *   Atendentes → setor
    *   IA → setor
    *   Prompts → setor
No MVP:
*   Tudo aponta para Atendimento Inicial
### 5.4 Motor de Análise (MVP)
Avaliações:
*   Tempo médio de resposta
*   Erros ortográficos (regra simples)
*   Uso de áudio/documento
*   Uso excessivo de respostas prontas
*   Empatia (IA)
Resultado:
*   Pontuação
*   Lista de erros
*   Lista de acertos
### 5.5 Serviço de IA (MVP)
*   Recebe:
    *   Conversa
    *   Prompts do setor
*   Retorna:
    *   Classificações
    *   Feedback textual
    *   Pontuação
Sem fine-tuning.
Sem treinamento automático.
Tudo guiado por prompt.
### 5.6 Feedback e Relatórios
#### Diário
*   Gerado automaticamente
*   Consolidado por atendente
*   Visível para o líder
#### Quinzenal
*   Comparação entre períodos
*   Evolução por atendente
*   Visível para VP
### 5.7 Envio de Feedback
#### Slack
*   Atendente recebe:
    *   Resumo
    *   Pontos de melhoria
    *   Link pro dashboard
#### Email (SMTP)
*   VP e líderes
*   Relatórios quinzenais consolidados
## 6\. Banco de Dados
Entidades principais:
*   users
*   sectors
*   attendances
*   messages
*   ai\_prompts
*   ai\_evaluations
*   feedbacks
*   reports
Tudo com:
*   sector\_id
## 7\. Dashboard (Next.js)
### Admin
*   Gerenciar usuários
*   Gerenciar setores
*   Gerenciar prompts da IA
*   Ativar/desativar regras
### Líder
*   Ver feedback diário
*   Ajustar feedback antes de enviar
*   Acompanhar evolução da equipe
### Atendente
*   Ver feedback recebido
*   Histórico
*   Evolução quinzenal
## 8\. Fluxos do MVP
### Diário
1. Cron busca atendimentos
2. Motor analisa
3. IA avalia com prompts do setor
4. Feedback diário é gerado
5. Líder visualiza
### Quinzenal
1. Consolidação automática
2. IA gera análise comparativa
3. VP revisa
4. Envio via email e Slack